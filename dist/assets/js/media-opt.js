!function(){function t(){try{const t=document.createElement("canvas");return!!t.getContext&&0===t.toDataURL("image/webp").indexOf("data:image/webp")}catch(t){return!1}}async function e(t){try{return(await fetch(t,{method:"HEAD"})).ok}catch(t){return!1}}document.addEventListener("DOMContentLoaded",function(){Array.from(document.images||[]).forEach(t=>{t.hasAttribute("loading")||t.setAttribute("loading","lazy"),t.hasAttribute("decoding")||t.setAttribute("decoding","async")}),async function(){const a=document.body;if(!a)return;if(!t())return;const n="assets/img/pacman.webp";await e(n)&&(a.style.backgroundImage=`url('${n}')`,a.style.backgroundRepeat=a.style.backgroundRepeat||"repeat",a.style.imageRendering=a.style.imageRendering||"pixelated")}(),async function(){if(!t())return;const a=Array.from(document.images||[]);await Promise.all(a.map(async t=>{const a=t.getAttribute("src")||"";if(!a)return;const n=a.toLowerCase();if(n.endsWith(".png")||n.endsWith(".jpg")||n.endsWith(".jpeg")){const n=a.replace(/\.(png|jpg|jpeg)$/i,".webp");await e(n)&&t.setAttribute("src",n)}}))}(),function(){const t=document.getElementById("bg-music"),e=document.getElementById("muteToggle");if(!t||!e)return;const a=!!document.querySelector('script[src*="assets/js/script.js"]'),n=t.getAttribute("src");n&&(t.setAttribute("data-src",n),t.removeAttribute("src")),t.setAttribute("preload","none"),t.muted=!0,t.autoplay=!1,e&&!e.dataset.mediaOptInit&&(e.textContent="ðŸ”‡",e.dataset.mediaOptInit="1");const r=async n=>{try{if(!t.getAttribute("src")){const e=t.getAttribute("data-src");e&&(t.setAttribute("src",e),await t.load())}if(t.muted=!t.muted,!t.paused&&t.muted)try{await t.pause()}catch{}else try{await t.play()}catch{}e.textContent=t.muted?"ðŸ”‡":"ðŸ”Š",e.setAttribute("aria-pressed",String(!t.muted)),e.setAttribute("aria-label",t.muted?"Ativar som":"Desativar som"),a&&e.removeEventListener("click",r)}catch(t){}};e.addEventListener("click",r)}()})}();