<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>SapMan | Quiz SAP-1</title>
  <link rel="icon" href="assets/img/logo-page.png" type="image/png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="assets/css/emular.css" />
  <link rel="stylesheet" href="assets/css/footer.css" />
  <link rel="stylesheet" href="assets/css/quiz.css" />
  <link rel="stylesheet" href="assets/css/style.css" />
  
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
  
  

</head>
<body>

  <header class="header">
    <div class="logo-container">
      <img src="assets/img/logo.png" alt="Logo ProjetoSap" class="logo" />
    </div>

    <nav>
      <ul class="nav-list">
        <li><button class="li-btn" type="button" onclick="location.href='home.html'">Home</button></li>
        <li><button class="li-btn" type="button" onclick="location.href='oqueesap.html'">O que é SAP</button></li>
        <li><button class="li-btn" type="button" onclick="location.href='quiz.html'">Quiz</button></li>
        <li><button class="li-btn" type="button" onclick="location.href='equipesap.html'">Equipe</button></li>
        <li><button class="li-btn" type="button" onclick="location.href='index.html#emulacao'">Emulação</button></li>
      </ul>
    </nav>

    <!-- Botão de Mudo -->
    <button id="muteToggle" class="li-btn" title="Alternar som">🔊</button>
  </header>

  <audio id="bg-music" src="assets/audio/pacman.mp3" autoplay loop></audio>

  <!-- Título da página -->
  <div class="container" style="margin-bottom: 20px;">
    <h1 style="color: #ffd700; text-align: center; font-size: 2em; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8); margin: 30px 0 20px 0;">
      🎮 Quiz SAP-1 🎮
    </h1>
    <p style="text-align: center; color: #fff; font-size: 0.9em; margin-bottom: 30px;">
      Teste seus conhecimentos sobre o computador SAP-1! Você tem 3 vidas para completar o quiz.
    </p>
  </div>

  <main class="quiz-container">
    <!-- Coluna principal: status, pergunta, opções e botões -->
    <div class="quiz-main">
      <div id="status" class="status-bar">
        <span class="status-item">Modo: Infinito</span>
        <span class="status-sep">•</span>
        <span class="status-item">Respondidas: <span id="answered-count">0</span></span>
        <span class="status-sep">•</span>
        <span class="status-item">Vidas: <span class="hearts" id="lives">❤️❤️❤️</span></span>
      </div>
      <div style="text-align:center; margin-top:10px; color:#fff; opacity:0.9; font-size:0.85em;">Responda quantas perguntas quiser — o quiz termina quando você perder 3 vidas.</div>
      <div id="question" class="question">Carregando pergunta...</div>
      <div id="options" class="options"></div>
      <div id="message"></div>
      <button id="restartBtn" class="restart-btn" onclick="startQuiz()" style="display:none;">Jogar Novamente</button>
    </div>

    <!-- Aside: Leaderboard & Achievements -->
    <aside id="sidePanel" class="quiz-side">
      <div id="leaderboard" class="panel small-panel card-modern"> </div>
      <div id="achievements" class="panel small-panel card-modern"> </div>
    </aside>
  </main>

  <!-- Botão para baixar estatísticas -->
  <div style="text-align:center; margin: 20px;">
    <div style="display:inline-flex; gap:8px; flex-wrap:wrap; justify-content:center; align-items:center;">
      <button class="li-btn" onclick="exportResults('txt')" style="font-size: 0.8em; padding: 10px 20px;">📄 Baixar TXT</button>
      <button class="li-btn" onclick="exportResults('json')" style="font-size: 0.8em; padding: 10px 20px;">🗂️ Baixar JSON</button>
      <button class="li-btn" onclick="exportResults('csv')" style="font-size: 0.8em; padding: 10px 20px;">📑 Baixar CSV</button>
      <button class="li-btn" onclick="startTutorial()" style="font-size: 0.8em; padding: 10px 20px;">📘 Tutorial</button>
    </div>
  </div>

  <!-- Overlay do Tutorial -->
  <div id="tutorialOverlay" class="tutorial-overlay" style="display:none;">
    <div class="tutorial-card">
      <h2>Tutorial Rápido</h2>
      <ol>
        <li>Leia a pergunta e escolha uma das opções.</li>
        <li>Você tem 3 vidas. Ao errar, perde uma vida.</li>
        <li>Ao final, salve sua pontuação no Top 3.</li>
        <li>Use o botão de export para baixar suas estatísticas.</li>
      </ol>
      <div style="display:flex; gap:8px; justify-content:center; margin-top:12px;">
        <button class="li-btn" onclick="closeTutorial()">Fechar</button>
      </div>
    </div>
  </div>

  <!-- Modal do gráfico (opcional) -->
  <div id="chartModal" class="chart-modal">
    <button class="close-btn" onclick="closeChart()">❌</button>
    <canvas id="performanceChartModal" width="500" height="300"></canvas>
  </div>

  <!-- Modal: salvar nome no placar -->
  <div id="nameModal" class="modal-overlay" style="display:none;">
    <div class="modal-card">
      <h3>Salvar no Placar</h3>
      <p>Sua pontuação: <span id="modalScore">0</span> pts</p>
      <input id="playerNameInput" type="text" placeholder="Seu nome" maxlength="20" />
      <div class="modal-actions">
        <button class="li-btn" id="saveNameBtn">Salvar</button>
        <button class="li-btn" id="cancelNameBtn">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-container">
      <div class="footer-section footer-brand">
        <div class="footer-brand">
          <img src="assets/img/logo.png" alt="Logo ProjetoSap" height="48" />
          
        </div>
      </div>
      <div class="footer-section footer-nav">
        <h4>Navegação</h4>
        <ul>
          <li><a href="home.html">Home</a></li>
          <li><a href="oqueesap.html">O que é SAP</a></li>
          <li><a href="quiz.html">Quiz</a></li>
          <li><a href="equipesap.html">Equipe</a></li>
          <li><a href="index.html#emulacao">Emulação</a></li>
        </ul>
      </div>
      <div class="footer-section footer-info">
        <h4>Sobre</h4>
        <p>
          Projeto acadêmico dedicado à divulgação e ensino de arquitetura de computadores.<br />
          Referência principal: <a href="assets/docs/Artigo_SAP1_Malvino.pdf" download>Artigo_SAP1_Malvino.pdf</a><br />
          Professor orientador: Prof. Claudio
        </p>
      </div>
      <div class="footer-section footer-social">
        <h4>Equipe</h4>
        <p>Any Gabriela, Eduardo Aniceto, Iara Pubilo, Izabel Chaves e Pedro Guimarães</p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 Desvendando o SAP-1. Todos os direitos reservados.</p>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="assets/js/quiz.js" defer></script>
  <script src="assets/js/oqesap.js" defer></script>
</body>
</html>